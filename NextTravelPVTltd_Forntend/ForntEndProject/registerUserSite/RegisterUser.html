<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Your Account</title>
    <link href="../assets/lib/bootstrap-5.1.3-dist/bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/css/admin.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/registerform.css">
</head>
<body>

<header id="header" class="header fixed-top d-flex align-items-center">
    <div class="d-flex align-items-center justify-content-between">
        <header>
            <img src="/assets/img/logo.png" width="100">

        </header>
    </div>
</header>
<aside id="sidebar" class="sidebar">
    <ul class="sidebar-nav" id="sidebar-nav">
        <li class="nav-item">
            <a class="nav-link " href="../registerUserSite/RegisterUser.html"><span>Account</span></a>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="../registerUserSite/Reservation.html"><span>Reservation</span> </a>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="../registerUserSite/Booking.html"><span>Booking</span> </a>
        </li>
      <li class="nav-item"><a class="nav-link collapsed" href="../pages/otherPage/LoginPage.html"><span>LogOut</span></a></li>
    </ul>
</aside>
<main id="main" class="main">


    <section class="section dashboard">
        <div class="pageTitle" id="pageOne">
            <h1>Profile</h1>
        </div>
        <div class="row"
             style="background-color: white;padding-top: 20px; border: 1px solid rgba(108,123,136,0.19);font-size: small;border-radius: 10px">
            <div class="container-fluid h-custom">

                <div class="container rounded bg-white">
                    <form action="user" method="post" id="userDetails">
                    <div class="row">
                        <div class="col-md-5 border-right">
                            <div class="d-flex flex-column align-items-center text-center p-3 py-5">
                                <div class="profile-pic-wrapper">
                                    <div class="pic-holder">
                                        <img id="profilePic" class="pic"
                                             src="../assets/img/Profile Pic.jpeg"
                                             alt="profilePic">
                                        <Input class="uploadProfileInput" type="file" name="profilepic"
                                               id="regUserProfilePhoto"
                                               accept="image/*" style="opacity: 0;"/>
                                        <label for="regUserProfilePhoto" class="upload-file-block">
                                            <div class="text-center">
                                                <div class="mb-2">
                                                    <i class="fa fa-camera fa-2x"></i>
                                                </div>
                                                <div class="text-uppercase">
                                                    Update <br/> Profile Photo
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-7 border-right">
                            <div class="p-3 py-5">
                                <div class="row">
                                    <div class="col-md-6">
                                        <span class="span m-1">User Id</span>
                                        <input class="form-control" id="userId" readonly
                                               name="userId"
                                               placeholder="NTU-001" type="text">
                                    </div>
                                    <div class="col-md-6">
                                        <span class="span m-1">Name</span>
                                        <input id="reg_Name" name="name" type="text" class="form-control"
                                               placeholder="">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <span class="span m-1 small">NIC</span>
                                        <input id="reg_NIC" name="nic" type="text" class="form-control" placeholder="">
                                    </div>
                                    <div class="col-md-6">
                                        <span class="span m-1 small">Age</span>
                                        <input id="reg_Age" name="age" type="int" class="form-control" placeholder="">
                                    </div>
                                    <div class="col-md-6">
                                        <span class="span m-1 small">Gender</span>
                                        <select id="reg_Gender" name="gender" type="text"
                                                class="form-control"
                                                placeholder="">
                                            <option value="FEMALE">FEMALE</option>
                                            <option value="MALE">MALE</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <span class="span m-1 small">Email</span>
                                        <input id="reg_Email" name="email" type="email"
                                               class="form-control" n
                                               placeholder="">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <span class="span m-1 small">Password</span>
                                        <input id="reg_Password" name="password" type="password"
                                               class="form-control"
                                               placeholder="">

                                    </div>
                                    <div class="col-md-6">
                                        <span class="span m-1 small">Contact Number</span>
                                        <input id="rag_contactNumber" name="contactNumber" type="text"
                                               class="form-control"
                                               placeholder="">
                                    </div>
                                    <div class="col-md-6">
                                        <span class="span m-1 small">Role Type</span>
                                        <select id="reg_RoleType" name="roleType" type="text"
                                                class="form-control"
                                                placeholder="">
                                            <option value="CUSTOMER">CUSTOMER</option>

                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <span class="span m-1 small">Address</span>
                                        <input id="rag_address" name="address" type="text"
                                               class="form-control"
                                               placeholder="">
                                    </div>
                                </div>
                                <div class="mt-5 text-center">
                                    <button class="btn btn-savebtn profile-button" type="button" id="register_button">Save Profile
                                    </button>
                                </div>

                            </div>
                        </div>

                        <br>
                    </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
</main>
</body>
<script>
    document.addEventListener("change", function (event) {
        if (event.target.classList.contains("uploadProfileInput")) {
            var triggerInput = event.target;
            var currentImg = triggerInput.closest(".pic-holder").querySelector(".pic")
                .src;
            var holder = triggerInput.closest(".pic-holder");
            var wrapper = triggerInput.closest(".profile-pic-wrapper");

            var alerts = wrapper.querySelectorAll('[role="alert"]');
            alerts.forEach(function (alert) {
                alert.remove();
            });

            triggerInput.blur();
            var files = triggerInput.files || [];
            if (!files.length || !window.FileReader) {
                return;
            }

            if (/^image/.test(files[0].type)) {
                var reader = new FileReader();
                reader.readAsDataURL(files[0]);

                reader.onloadend = function () {
                    holder.classList.add("uploadInProgress");
                    holder.querySelector(".pic").src = this.result;

                    var loader = document.createElement("div");
                    loader.classList.add("upload-loader");
                    loader.innerHTML =
                        '<div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div>';
                    holder.appendChild(loader);

                    setTimeout(function () {
                        holder.classList.remove("uploadInProgress");
                        loader.remove();

                        var random = Math.random();
                        if (random < 0.9) {
                            wrapper.innerHTML +=
                                '<div class="snackbar show" role="alert"><i class="fa fa-check-circle text-success"></i> Profile image updated successfully</div>';
                            triggerInput.value = "";
                            setTimeout(function () {
                                wrapper.querySelector('[role="alert"]').remove();
                            }, 3000);
                        } else {
                            holder.querySelector(".pic").src = currentImg;
                            wrapper.innerHTML +=
                                '<div class="snackbar show" role="alert"><i class="fa fa-times-circle text-danger"></i> There is an error while uploading! Please try again later.</div>';
                            triggerInput.value = "";
                            setTimeout(function () {
                                wrapper.querySelector('[role="alert"]').remove();
                            }, 3000);
                        }
                    }, 1500);
                };
            } else {
                wrapper.innerHTML +=
                    '<div class="alert alert-danger d-inline-block p-2 small" role="alert">Please choose a valid image.</div>';
                setTimeout(function () {
                    var invalidAlert = wrapper.querySelector('[role="alert"]');
                    if (invalidAlert) {
                        invalidAlert.remove();
                    }
                }, 3000);
            }
        }
    });
</script>
</html>
